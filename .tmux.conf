# Source - https://github.com/AlariCode/configs/blob/master/tmux.conf



# ────────────────────────────────────────────────────────────
# Main Settings
# ────────────────────────────────────────────────────────────

# Terminal
set -g default-terminal "screen-256color"

# Prefix
set -g prefix C-a
unbind C-b

# Изменение индексов
set -g base-index 1
setw -g pane-base-index 1



# ────────────────────────────────────────────────────────────
# Pane & Window Management
# ────────────────────────────────────────────────────────────

# Horizontal split
unbind %
bind | split-window -h

# Vertical split
unbind '"'
bind - split-window -v

# Reload config quickly
unbind r
bind r source-file ~/.tmux.conf

# Pane resizing (hold prefix + key)
bind -r j resize-pane -D 5
bind -r k resize-pane -U 5
bind -r l resize-pane -R 5
bind -r h resize-pane -L 5

# Toggle zoom
bind -r m resize-pane -Z



# ────────────────────────────────────────────────────────────
# Interaction & UX
# ────────────────────────────────────────────────────────────

# Enable mouse support
set -g mouse on

# Use vim-like keybindings in copy mode
set-window-option -g mode-keys vi

# Allow tmux to interact with system clipboard
set -g set-clipboard on



# ────────────────────────────────────────────────────────────
# Copy Mode (macOS Clipboard Integration)
# ────────────────────────────────────────────────────────────

# Start selection
bind-key -T copy-mode-vi v send -X begin-selection

# Copy selection to macOS clipboard
bind-key -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"

# Disable mouse drag auto-copy
unbind -T copy-mode-vi MouseDragEnd1Pane



# ────────────────────────────────────────────────────────────
# Session & Navigation Helpers
# ────────────────────────────────────────────────────────────

# Сортировка по имени
bind s choose-tree -sZ -O name



# ────────────────────────────────────────────────────────────
# Plugin Manager (TPM)
# ────────────────────────────────────────────────────────────

# Plugin list
set -g @plugin 'tmux-plugins/tpm'

# Sensible defaults
set -g @plugin 'tmux-plugins/tmux-sensible'

# Vim ↔ tmux navigation
set -g @plugin 'christoomey/vim-tmux-navigator'

# Themes
set -g @plugin 'jimeh/tmux-themepack'

# Session manager
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Extended session tools
set -g @plugin 'tmux-plugins/tmux-sessionist'



# ────────────────────────────────────────────────────────────
# Plugin Configuration
# ────────────────────────────────────────────────────────────

# Theme
set -g @themepack 'powerline/default/purple'

# Persist pane content
set -g @resurrect-capture-pane-contents 'on'

# Auto restore sessions
set -g @continuum-restore 'on'



# ────────────────────────────────────────────────────────────
# TPM Initialization (MUST stay last)
# ────────────────────────────────────────────────────────────

run '~/.config/tmux/plugins/tpm/tpm'
